<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: client/StartGame.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: client/StartGame.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react';
import SubmitScore from './SubmitScore.jsx';

function StartGame({ difficulty }) {
    
    const [targetNumber, setTargetNumber] = useState();
    const [guess, setGuess] = useState();
    const [history, setHistory] = useState([]);
    const [winner, setWinner] = useState(false);
    const [score, setScore] = useState(0);

  //target number is 4443
  // 1234 -> XX
  // 4444 -> OOO
  // 5555 ->
  // 1344 -> XOX
  /**
   * @type {}
   */
    const settings = {
        'Easy': {
            'digits': 4,
            'maxInt': 4,
            'guesses': 10,
        },
        'Medium': {
            'digits': 4,
            'maxInt': 5,
            'guesses': 9,
        },
        'Hard': {
            'digits': 5,
            'maxInt': 6,
            'guesses': 8,
        },
    };

    const digitLength = settings[difficulty].digits;
    const maxIntLength = settings[difficulty].maxInt;
    const startingGuesses = settings[difficulty].guesses;
  
    // console.log('digits', settings[difficulty][digits])
  // history = [{origInput: 1234, hint: "XX"}, {origInput: 4444, hint: "OOO"}]
  // let guessesRemaining = 8 - history.length;
        useEffect(() => {
            fetch(`https://www.random.org/integers/?num=${digitLength}&amp;min=0&amp;max=${maxIntLength}&amp;col=4&amp;base=10&amp;format=plain&amp;rnd=new`)
            .then(response => response.text())
            .then(data => data.replace(/\s/g, ''))                
            .then(data => setTargetNumber(data))
        }, [])
  
   
    console.log('targetnumber', targetNumber)

/**
 * This function will accept a user's guess and return a hint
 * @param {string} userGuess 
 * @returns {string} 
 */
    function getHint(userGuess) {
        let result = '';
        const guessCache = {};
        const targetNumCache = {};

        for (let i = 0; i &lt; userGuess.length; i++) {
            if (userGuess[i] === targetNumber[i]) {
                result+='O';
                continue;
            } else {
                if (targetNumCache[userGuess[i]]) {
                    targetNumCache[userGuess[i]]--;
                    result+='X';
                } else {
                    guessCache[userGuess[i]] = 1;
                }
                
                if (guessCache[targetNumber[i]]) {
                    guessCache[targetNumber[i]]--;
                    result+='X';
                } else {
                    targetNumCache[targetNumber[i]] = 1;
                }
            }
        }
        return result; 
    }

    /**
     * This function accepts a synethtic event and 
     * @param {Object} e 
     */
    function submitGuess(e) {
        e.preventDefault();

        const hint = getHint(guess);

        const currGuess = {
          originalInput: guess,
          hint: hint,    
        };

        if (hint === 'OOOO') {
            currGuess.hint = 'You are correct!'
            setWinner(!winner)
        }

        if (hint === '') {
            currGuess.hint = 'Nice Try. Guess Again!'
        }

        setHistory([...history, currGuess]);
        setScore(history.length+1);
    }

  return (
    &lt;div>
      &lt;div>Guess the Four Digit Number&lt;/div>
      &lt;p>Each integer in the number will be from 0-4 inclusive. This number range increases with each difficulty setting&lt;/p>
      &lt;p>You will get a hint after every attempt&lt;/p>
      &lt;p>An X represents a number you guessed was correct but in the wrong location&lt;/p>
      &lt;p>An O represents a number you guessed was correct and in the right location&lt;/p>
      &lt;p>Note: The position of the X and O's are not correlated to the position of the number&lt;/p>
      &lt;p>- You will have 10 attempts to guess the number&lt;/p>
      &lt;form onSubmit={(e)=> {submitGuess(e)}}>
      &lt;label>Guess Number&lt;/label>
      {/* fix constraints with input here based on difficulty settings */}
      &lt;input placeholder='number' onChange={(e)=>setGuess(e.target.value)} type='number' max='4444' size='4' maxLength='4'>&lt;/input> 
      &lt;button disabled={history.length === 10 || winner === true}>Submit&lt;/button>
      &lt;/form>
      &lt;div>Guesses Remaining: {startingGuesses-history.length}&lt;/div>
      {winner &amp;&amp; &lt;div>
          You gussed the correct number!!! Your Score is {score}
          &lt;SubmitScore score={score} difficulty={difficulty}/>
          &lt;/div>}
      {history.length === startingGuesses &amp;&amp; winner === false &amp;&amp; &lt;div>
          You dummy you lost! The Secret Number was {targetNumber}
          &lt;SubmitScore score={score}/>
          &lt;/div>}
      &lt;ul>History
        {history.map(({ originalInput, hint }, index) => (
          &lt;li key={index}>Guess: {originalInput} Hint: {hint} &lt;/li>
        ))}
      &lt;/ul> 
    &lt;/div>
  )
}

export default StartGame</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Fri Jun 03 2022 16:24:31 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
